rules:
  gravity:
    if: DOWN.mat.density < SELF.mat.density
    do:
      - SWAP SELF DOWN
    mirrored: true
  slide_diagonally:
    if: RIGHT.mat.density < SELF.mat.density or DOWNRIGHT.mat.density < SELF.mat.density
    do: SWAP SELF DOWNRIGHT
    chance: 0.7
    mirrored: true
  slide_left:
    if: LEFT.mat.density < SELF.mat.density
    do: SWAP SELF LEFT
    chance: 0.7
    mirrored: false
  vine_rule:
    if: SELF.mat == empty && DOWN.mat == vine
    do: SET SELF vine
    mirrored: false
    chance: 0.01
  fall_slide:
    if: DOWN.mat.density < SELF.mat.density
    do:
      - SWAP SELF DOWN
    else:
      if: RIGHT.mat.density < SELF.mat.density and DOWNRIGHT.mat.density < SELF.mat.density
      do: SWAP SELF DOWNRIGHT
    mirrored: true


types:
  solid:
  movable_solid:
    base_rules: [
        fall_slide
    ]
  liquid:
  gas:
  plant:


materials:
  sand:
    type: movable_solid
    color: [1.0, 1.0, 0]
    density: 1.5
  
  rock:
    type: solid
    color: [0.4, 0.4, 0.4]
    density: 4.0

  water:
    type: liquid
    color: [0.0, 0.0, 1.0, 0.5]
    density: 1.5

  radioactive:
    type: solid
    color: [0.196, 0.55, 0.184]
    emission: [0.05, 0.7, 0.05, 0.9]
    density: 5.0
  
  smoke:
    type: gas
    color: [0.3, 0.3, 0.3, 0.3]
    density: 0.1
  
  toxic_sludge:
    type: liquid
    color: [0.0, 0.7, 0.2, 0.5]
    emission: [0.0, 0.5, 0.0, 0.99999]
    density: 1.8
  
  # vine:
  #   type: plant
  #   color: [0.14, 0.5, 0.19]
  #   density: 2.5
  #   extra_rules: [
  #     vine_rule
  #   ]